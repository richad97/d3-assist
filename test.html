<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .bar_tooltip {
        position: absolute;
        display: none;
        min-width: 80px;
        height: auto;
        background: none repeat scroll;
        border: 1px solid #6f257f;
        padding: 14px;
        text-align: center;
        background-color: white;
        z-index: 1;
      }
    </style>
    <script src="https://d3js.org/d3.v5.min.js"></script>
  </head>
  <body></body>
  <script>
    function createData() {
      function makeDateArray() {
        let arr = [];
        let startDate = new Date("2020-01-01"); //YYYY-MM-DD
        let endDate = new Date("2020-03-01"); //YYYY-MM-DD

        while (startDate <= endDate) {
          arr.push(new Date(startDate));
          startDate.setDate(startDate.getDate() + 1);
        }
        return arr;
      }
      let dates = makeDateArray();

      let data = dates.map(function (x) {
        return {
          date: x,
          num: Math.floor(Math.random() * 101),
        };
      });
      return data;
    }

    const data = createData();

    const margin = { top: 80, right: 50, bottom: 80, left: 80 },
      width = 600 - margin.left - margin.right,
      height = 480 - margin.top - margin.bottom;

    const svg = d3
      .select("body")
      .append("svg")
      .attr("id", "line_chart")
      .attr("width", `${width + margin.left + margin.right}`)
      .attr("height", `${height + margin.top + margin.bottom}`);

    const g = svg
      .append("g")
      .attr("transform", `translate(${margin.left},${margin.top})`);

    const title = g
      .append("text")
      .attr("x", width / 2)
      .attr("y", 0 - margin.top / 2)
      .attr("text-anchor", "middle")
      .style("font-size", "16px")
      .attr("fill", "rgb(103, 103, 103)")
      .text("Weather");

    const xTitle = g
      .append("text")
      .attr("x", 13 * 20)
      .attr("y", height + margin.top - 30)
      .attr("text-anchor", "middle")
      .style("font-size", "16px")
      .attr("fill", "rgb(103, 103, 103)")
      .text("Weeks");

    const yTitle = g
      .append("text")
      .attr("y", -40)
      .attr("x", -9 * 20)
      .style("transform", "rotate(270deg)")
      .attr("font-size", "0.9em")
      .attr("text-anchor", "middle")
      .attr("fill", "rgb(103, 103, 103)")
      .text("Temperature");

    const xScale = d3
      .scaleTime()
      .domain(
        d3.extent(data, function (d) {
          return d.date;
        })
      )
      .range([0, width]);
    const yScale = d3
      .scaleLinear()
      .domain([
        0,
        d3.max(data, function (d) {
          return d.num;
        }),
      ])
      .range([height, 0]);

    const xAxis = g
      .append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(xScale));
    const yAxis = g.append("g").call(d3.axisLeft(yScale));

    const line = d3
      .line()
      .x(function (d) {
        return xScale(d.date);
      })
      .y(function (d) {
        return yScale(d.num);
      });

    g.append("path")
      .data([data])
      .attr("class", "line")
      .attr("d", line)
      .attr("stroke", "red")
      .attr("fill", "none");
  </script>
</html>
