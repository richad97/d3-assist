<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>D3 Assist</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/spectrum-colorpicker2/dist/spectrum.min.css"
    />
    <link rel="stylesheet" href="./scss/main.css" />
    <script>
      function copyDivToClipboard() {
        var range = document.createRange();
        range.selectNode(document.getElementById("line_template"));
        window.getSelection().removeAllRanges(); // clear current selection
        window.getSelection().addRange(range); // to select text
        document.execCommand("copy");
        window.getSelection().removeAllRanges(); // to deselect
        window.alert("Code has been copied to your clipboard.");
      }
    </script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script type="module" src="./src/line_chart/line_main.js"></script>
  </head>

  <div id="overlay">
    <div class="container" id="overlay_main_container">
      <p id="overlay_close_button">X</p>

      <div class="row">
        <div class="col-12 text-center">
          <p id="overlay_header">Enjoy!</p>
          <p id="overlay_subheader">Please review your code before copying.</p>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div id="overlay_code_container">
            <pre><code id="line_template">
              function createData() {
                function makeDateArray() {
                  let arr = [];
                  let startDate = new Date("2020-01-02"); //YYYY-MM-DD
                  let endDate = new Date("2020-01-22"); //YYYY-MM-DD
          
                  while (startDate &lt;= endDate) {
                    arr.push(new Date(startDate));
                    startDate.setDate(startDate.getDate() + 1);
                  }
                  return arr;
                }
                let dates = makeDateArray();
                let i = 1;
                let data = dates.map(function (x) {
                  i += 30;
                  return {
                    date: x,
                    num1: Math.floor(Math.random() * 101 + i++),
                    num2: Math.floor(Math.random() * 101 + i++),
                    num3: Math.floor(Math.random() * 101 + i++),
                  };
                });
                return data;
              }
            
              const data = createData();
                        
              const margin = { top: 80, right: 50, bottom: 80, left: 80 },
                width = 600 - margin.left - margin.right,
                height = 480 - margin.top - margin.bottom;
            
              const svg = d3
                .select("body")
                .append("svg")
                .attr("id", "line_chart")
                .attr("width", `${width + margin.left + margin.right}`)
                .attr("height", `${height + margin.top + margin.bottom}`)
                .style("background-color", "<span class="span-c" id="line_background_cp_span"></span>");

              const g = svg
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

              const title = g
                .append("text")
                .attr("x", <span class="span-c" id="line_title_slider_span"></span> * 20)
                .attr("y", 0 - margin.top / 2)
                .attr("text-anchor", "middle")
                .style("font-size", "16px")
                .attr("fill", "<span class="span-c" id="line_title_cp_span"></span>")
                .text("<span class="span-c" id="line_title_span"></span>");
          
              const xTitle = g
                .append("text")
                .attr("x", <span class="span-c" id="line_x_title_slider_span"></span> * 20)
                .attr("y", height + margin.top - 30)
                .attr("text-anchor", "middle")
                .style("font-size", "16px")
                .attr("fill", "<span class="span-c" id="line_x_title_cp_span"></span>")
                .text("<span class="span-c" id="line_x_title_span"></span>");
          
              const yTitle = g
                .append("text")
                .attr("y", -40)
                .attr("x", <span class="span-c" id="line_y_title_slider_span"></span> * 20)
                .style("transform", "rotate(270deg)")
                .attr("font-size", "0.9em")
                .attr("text-anchor", "middle")
                .attr("fill", "<span class="span-c" id="line_y_title_cp_span"></span>")
                .text("<span class="span-c" id="line_y_title_span"></span>");
            
              const xScale = d3
                .scaleTime()
                .domain(
                  d3.extent(data, function (d) {
                    return d.date;
                  })
                )
                .range([0, width]);
              const yScale = d3
                .scaleLinear()
                .domain([
                  0,
                  d3.max(data, function (d) {
                    return d.num1;
                  }),
                ])
                .range([height, 0]);
            
              const xAxis = g
                .append("g")
                .attr("id","x_axis")
                .attr("transform", "translate(0," + height + ")")
                .call(d3.axisBottom(xScale));

              const yAxis = g
                .append("g")
                .attr("id","y_axis")
                .call(d3.axisLeft(yScale));
              <span class="span-c" id="line_x_grid_checkbox_span">
              function make_x_gridlines() {
                return d3.axisBottom(xScale).ticks();
              }
          
              const xGrid = g
                .append("g")
                .attr("class", "grid")
                .attr("id", "x_grid")
                .attr("transform", "translate(0," + height + ")")
                .call(make_x_gridlines().tickSize(-height).tickFormat(""));
              </span>
              <span class="span-c" id="line_y_grid_checkbox_span">
              function make_y_gridlines() {
                return d3.axisLeft(yScale).ticks();
              }

              const yGrid = g
                .append("g")
                .attr("class", "grid")
                .attr("id", "y_grid")
                .call(make_y_gridlines().tickSize(-width).tickFormat(""));
              </span>
              <span class="span-c" id="line_1_select_span">
              const line1 = d3
                .line()
                .x(function (d) {
                  return xScale(d.date);
                })
                .y(function (d) {
                  return yScale(d.num1);
                });

              g.append("path")
                .data([data])
                .attr("class", "line")
                .attr("d", line1)
                .attr("stroke", "<span class="span-c" id="line_1_cp_span"></span>")
                .attr("stroke-width", `${<span class="span-c" id="line_1_width_slider_span"></span> * 0.5 }px`)
                .attr("fill", "none");
              </span>
              <span class="span-c" id="line_2_select_span">
              const line2 = d3
                .line()
                .x(function (d) {
                  return xScale(d.date);
                })
                .y(function (d) {
                  return yScale(d.num2);
                });

              g.append("path")
                .data([data])
                .attr("class", "line")
                .attr("d", line2)
                .attr("stroke", "<span class="span-c" id="line_2_cp_span"></span>")
                .attr("stroke-width", `${<span class="span-c" id="line_2_width_slider_span"></span> * 0.5 }px`)
                .attr("fill", "none");
              </span>
              <span class="span-c" id="line_3_select_span">
              const line3 = d3
                .line()
                .x(function (d) {
                  return xScale(d.date);
                })
                .y(function (d) {
                  return yScale(d.num3);
                });

              g.append("path")
                .data([data])
                .attr("class", "line")
                .attr("d", line3)
                .attr("stroke", "<span class="span-c" id="line_3_cp_span"></span>")
                .attr("stroke-width", `${<span class="span-c" id="line_3_width_slider_span"></span> * 0.5 }px`)
                .attr("fill", "none");
              </span>
              <span class="span-c" id="line_area_checkbox_span">
              const area = d3
                .area()
                .x((d) => xScale(d.date))
                .y0(yScale(0))
                .y1((d) => yScale(d.num1));
          
              const lineArea = g
                .append("path")
                .datum(data)
                .attr("id", "line_area")
                .attr("fill", "<span class="span-c" id="line_area_cp_span"></span>")
                .attr("d", area);
              </span>
              <span class="span-c" id="line_datapoint_checkbox_span">
              const circles = g.selectAll(".circles").data(data);

              circles.exit().remove();
          
              circles
                .enter()
                .append("circle")
                .attr("class", "circles")
                .attr("display", "")
                .attr("r", <span class="span-c" id="line_point_radius_slider_span"></span> * 0.5 )
                .attr("cx", function (d, i) {
                  return xScale(d.date);
                })
                .attr("cy", function (d, i) {
                  return yScale(d.num1);
                })
                .attr("fill", "<span class="span-c" id="line_datapoint_cp_span"></span>")
                .attr("stroke", "<span class="span-c" id="line_datapoint_border_cp_span"></span>")
                .attr("stroke-width", "1px")<span class="span-c" id="line_hover_checkbox_span">
                .on("mouseover", function (d, i) {
                  d3.select(this).attr("opacity", "0.6");
                })
                .on("mouseout", function (d, i) {
                  d3.select(this).attr("opacity", "1");
                });</span>
              </span>
              <span class="span-c" id="line_tooltip_checkbox_span">
              let tooltip = d3.select("body").append("div").attr("class", "line_tooltip");

              d3.select(".line_tooltip").style("background-color", "white");
              d3.select(".line_tooltip").style("border", "1px solid rgba(0,0,0,0.2)");
          
              let circles2 = d3.selectAll(".circles");
              circles2
                .on("mousemove", function (d) {
                  tooltip
                    .style("left", d3.event.pageX + 10 + "px")
                    .style("top", d3.event.pageY + 10 + "px")
                    .style("display", "inline-block");
                })
                .on("mouseout", function (d) {
                  tooltip.style("display", "none");
                });
              </span>

              <span class="span-c" id="line_x_line_checkbox_span">
              d3.select("#x_axis > path").attr("display", "none");
              </span>
              <span class="span-c" id="line_y_line_checkbox_span">
              d3.select("#y_axis > path").attr("display", "none");
              </span>
              d3.selectAll("#x_axis >.tick>line").style("display", "none");
              d3.selectAll("#y_axis >.tick>line").style("display", "none");
              d3.select("#x_grid > path").attr("stroke", "rgba(0,0,0,0)");
              d3.select("#y_grid > path").attr("stroke", "rgba(0,0,0,0)");  
              d3.selectAll(".tick > text").style("fill", "<span class="span-c" id="line_tick_cp_span"></span>");
              d3.selectAll(".grid > g > line").attr("stroke", "<span class="span-c" id="line_grid_cp_span"></span>");
              d3.select("#x_axis > path").style("stroke", "<span class="span-c" id="line_x_line_cp_span"></span>");
              d3.select("#y_axis > path").style("stroke", "<span class="span-c" id="line_y_line_cp_span"></span>");

            </code></pre>
          </div>
        </div>
      </div>
      <div class="row" id="overlay_button_container">
        <div class="col-6">
          <button id="overlay_button_copy" class="overlay_buttons">
            Copy To Clipboard
          </button>
        </div>
        <div class="col-6">
          <button id="overlay_button_tab" class="overlay_buttons">
            Preview On New Tab
          </button>
        </div>
      </div>
    </div>
  </div>

  <nav class="navbar">
    <div class="col-lg-4 col-md-4 col-sm-12 text-center">
      <img
        src="https://raw.githubusercontent.com/d3/d3-logo/master/d3.svg"
        width="40"
        height="30"
        alt="d3logo"
        class="text-center"
      />
    </div>
    <div class="col-lg-2 col-md-2 col-sm-12 text-center">
      <a href="./bar_chart.html">BAR CHART</a>
    </div>
    <div class="col-lg-2 col-md-2 col-sm-12 text-center">
      <a href="./pie_chart.html">PIE CHART</a>
    </div>

    <div class="col-lg-2 col-md-2 col-sm-12 text-center">
      <a href="./line_chart.html" class="selected">LINE CHART</a>
    </div>
    <div class="col-lg-2 col-md-2 col-sm-12 text-center">
      <a href="#">MAP</a>
    </div>
  </nav>

  <body>
    <div class="container" id="main_container">
      <div class="row justify-content-around">
        <div class="col-lg-5 col-sm-12 mb-5" id="form_container">
          <form action="#" id="form">
            <div class="row">
              <h6>Titles</h6>
              <div class="col-4 col-c">
                <label for="line_title_input">
                  Title
                  <input
                    type="text"
                    name="line_title_input"
                    id="line_title_input"
                    class="text_inputs"
                    value="Total Reported Cases"
                    placeholder="Enter text..."
                  />
                </label>
              </div>
              <div class="col-4 col-c">
                <label for="line_xaxis_title_input">
                  x-Axis
                  <input
                    type="text"
                    name="line_xaxis_title_input"
                    id="line_xaxis_title_input"
                    class="text_inputs"
                    value="Days"
                    placeholder="Enter text..."
                  />
                </label>
              </div>
              <div class="col-4 col-c">
                <label for="line_yaxis_title_input">
                  y-Axis
                  <input
                    type="text"
                    name="line_yaxis_title_input"
                    id="line_yaxis_title_input"
                    class="text_inputs"
                    value="Cases"
                    placeholder="Enter text..."
                  />
                </label>
              </div>
            </div>
            <div class="row">
              <h6>Sliders</h6>
              <div class="col-4 col-c">
                <label for="line_title_slider">Title </label>
                <input
                  type="range"
                  min="0"
                  max="26"
                  value="13"
                  name="line_title_slider"
                  id="line_title_slider"
                  class="slider"
                />
              </div>
              <div class="col-4 col-c">
                <label for="line_xaxis_title_slider">x-Axis </label>
                <input
                  type="range"
                  min="0"
                  max="26"
                  value="13"
                  name="line_xaxis_title_slider"
                  id="line_xaxis_title_slider"
                  class="slider"
                />
              </div>
              <div class="col-4 col-c">
                <label for="line_yaxis_title_slider">y-Axis </label>
                <input
                  type="range"
                  min="-17"
                  max="-1"
                  value="-9Sw"
                  name="line_yaxis_title_slider"
                  id="line_yaxis_title_slider"
                  class="slider"
                />
              </div>
            </div>
            <div class="row">
              <div class="col-4 col-c">
                <label for="line_width_slider">Line Width </label>
                <input
                  type="range"
                  min="1"
                  max="11"
                  value="1"
                  name="line_width_slider"
                  id="line_width_slider"
                  class="slider"
                />
              </div>
              <div class="col-4 col-c">
                <label for="line_point_radius_slider">Point Radius </label>
                <input
                  type="range"
                  min="1"
                  max="11"
                  value="6"
                  name="line_point_radius_slider"
                  id="line_point_radius_slider"
                  class="slider"
                />
              </div>
              <div class="col-4 col-c"></div>
            </div>
            <div class="row">
              <h6>Checkboxes</h6>
              <div class="col-4 col-c">
                <label for="line_tooltip_checkbox"
                  >Tooltip
                  <input
                    type="checkbox"
                    name="line_tooltip_checkbox"
                    id="line_tooltip_checkbox"
                /></label>
              </div>
              <div class="col-4 col-c">
                <label for="line_xaxis_grid_checkbox"
                  >x-Axis Grid
                  <input
                    type="checkbox"
                    name="line_xaxis_grid_checkbox"
                    id="line_xaxis_grid_checkbox"
                  />
                </label>
              </div>
              <div class="col-4 col-c">
                <label for="line_yaxis_grid_checkbox"
                  >y-Axis Grid
                  <input
                    type="checkbox"
                    name="line_yaxis_grid_checkbox"
                    id="line_yaxis_grid_checkbox"
                    checked
                  />
                </label>
              </div>
            </div>
            <div class="row">
              <div class="col-4 col-c">
                <label for="line_datapoint_checkbox"
                  >Datapoints
                  <input
                    type="checkbox"
                    name="line_datapoint_checkbox"
                    id="line_datapoint_checkbox"
                    checked
                /></label>
              </div>
              <div class="col-4 col-c">
                <label for="line_xaxis_line_checkbox"
                  >x-Axis Line
                  <input
                    type="checkbox"
                    name="line_xaxis_line_checkbox"
                    id="line_xaxis_line_checkbox"
                    checked
                  />
                </label>
              </div>
              <div class="col-4 col-c">
                <label for="line_yaxis_line_checkbox"
                  >y-Axis Line
                  <input
                    type="checkbox"
                    name="line_yaxis_line_checkbox"
                    id="line_yaxis_line_checkbox"
                  />
                </label>
              </div>
            </div>
            <div class="row">
              <div class="col-4 col-c">
                <label for="line_hover_checkbox"
                  >Hover
                  <input
                    type="checkbox"
                    name="line_hover_checkbox"
                    id="line_hover_checkbox"
                  />
                </label>
              </div>
              <div class="col-4 col-c"></div>
              <div class="col-4 col-c"></div>
            </div>
            <div class="row">
              <h6>Colors</h6>

              <div class="col-4 col-c">
                <div class="row">
                  <label for="line_background_cp">Background</label>
                </div>
                <input
                  name="line_background_cp"
                  id="line_background_cp"
                  value="rgb(84, 81, 93)"
                />
              </div>
              <div class="col-4 col-c">
                <div class="row">
                  <label for="line_tick_cp">Ticks</label>
                </div>
                <input
                  name="line_tick_cp"
                  id="line_tick_cp"
                  value="rgb(238, 238, 238)"
                />
              </div>
              <div class="col-4 col-c"></div>
            </div>
            <div class="row">
              <div class="col-4 col-c">
                <div class="row">
                  <label for="line_title_cp">Title</label>
                </div>
                <input
                  name="line_title_cp"
                  id="line_title_cp"
                  value="rgb(255, 255, 255)"
                />
              </div>

              <div class="col-4 col-c">
                <div class="row">
                  <label for="line_xaxis_title_cp">x-Axis Title</label>
                </div>
                <input
                  name="line_xaxis_title_cp"
                  id="line_xaxis_title_cp"
                  value="rgb(255, 255, 255)"
                />
              </div>
              <div class="col-4 col-c">
                <div class="row">
                  <label for="line_yaxis_title_cp">y-Axis Title</label>
                </div>
                <input
                  name="line_yaxis_title_cp"
                  id="line_yaxis_title_cp"
                  value="rgb(255, 255, 255)"
                />
              </div>
            </div>
            <div class="row">
              <div class="col-4 col-c">
                <div class="row">
                  <label for="line_grid_cp">Grid</label>
                </div>
                <input
                  name="line_grid_cp"
                  id="line_grid_cp"
                  value="rgba(255, 255, 255, 0.337)"
                />
              </div>

              <div class="col-4 col-c">
                <div class="row">
                  <label for="line_xaxis_line_cp">x-Axis Line</label>
                </div>
                <input
                  name="line_xaxis_line_cp"
                  id="line_xaxis_line_cp"
                  value="rgb(255, 255, 255)"
                />
              </div>
              <div class="col-4 col-c">
                <div class="row">
                  <label for="line_yaxis_line_cp">y-Axis Line</label>
                </div>
                <input
                  name="line_yaxis_line_cp"
                  id="line_yaxis_line_cp"
                  value="rgb(211, 211, 211)"
                />
              </div>
            </div>
            <div class="row">
              <div class="col-4 col-c">
                <div class="row">
                  <label for="line_datapoint_cp">Datapoint</label>
                </div>
                <input
                  name="line_datapoint_cp"
                  id="line_datapoint_cp"
                  value="rgba(255, 255, 255, 0)"
                />
              </div>
              <div class="col-4 col-c">
                <div class="row">
                  <label for="line_datapoint_border_cp">Datapoint Border</label>
                </div>
                <input
                  name="line_datapoint_border_cp"
                  id="line_datapoint_border_cp"
                  value="rgb(255, 255, 255)"
                />
              </div>
              <div class="col-4 col-c">
                <div class="row">
                  <label for="line_area_cp">Line Area</label>
                </div>
                <input
                  name="line_area_cp"
                  id="line_area_cp"
                  value="rgb(245, 245, 245)"
                />
              </div>
            </div>
            <div class="row">
              <div class="col-4 col-c">
                <div class="row">
                  <label for="line_color_cp1">Line 1</label>
                </div>
                <input
                  name="line_color_cp1"
                  id="line_color_cp1"
                  value="rgb(250, 250, 250)"
                />
              </div>
              <div class="col-4 col-c">
                <div class="row">
                  <label for="line_color_cp2">Line 2</label>
                </div>
                <input
                  name="line_color_cp2"
                  id="line_color_cp2"
                  value="rgb(250, 250, 250)"
                />
              </div>
              <div class="col-4 col-c">
                <div class="row">
                  <label for="line_color_cp3">Line 3</label>
                </div>
                <input
                  name="line_color_cp3"
                  id="line_color_cp3"
                  value="rgb(250, 250, 250)"
                />
              </div>
            </div>
          </form>
          <div class="row mt-2">
            <input type="submit" value="Preview" id="form_submit_button" />
          </div>
        </div>
        <div class="col-lg-5 col-sm-12 mb-5" id="graph_container">
          <div class="row">
            <div id="line_chart_div"></div>
          </div>
          <div class="row" id="graph_dimension_div">
            <div class="col-1">
              <label for="">Responsive</label>
            </div>
            <div class="col-2">
              <input type="checkbox" min="1" max="5" value="5" />
            </div>
            <div class="col-1">
              <label for="line_area_checkbox">Area</label>
            </div>
            <div class="col-2">
              <input
                type="checkbox"
                name="line_area_checkbox"
                id="line_area_checkbox"
              />
            </div>
            <div class="col-1">
              <label for="line_amount_input">Lines</label>
            </div>
            <div class="col-2">
              <input
                type="number"
                name="line_amount_input"
                id="line_amount_input"
                min="1"
                max="3"
                value="1"
              />
            </div>
            <div class="col-1">
              <label for="line_theme_input">Theme</label>
            </div>
            <div class="col-2">
              <input
                type="number"
                name="line_theme_input"
                id="line_theme_input"
                min="1"
                max="3"
                value="1"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
    <script
      src="https://code.jquery.com/jquery-3.6.0.js"
      integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/spectrum-colorpicker2/dist/spectrum.min.js"></script>
  </body>
</html>
